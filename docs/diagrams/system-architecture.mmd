graph TB
    subgraph Client["Client Layer"]
        Web[Web Browser]
        Mobile[Mobile App]
    end
    
    subgraph App["Application Layer - BEAM Cluster"]
        LV[LiveView UI]
        API[REST/GraphQL API]
        Workers[Pipeline Workers]
    end
    
    subgraph Data["Data Layer"]
        PG[(PostgreSQL<br/>Relational Data)]
        TS[(TimescaleDB<br/>Time-Series Data)]
        Cache[ETS Cache<br/>Hot Data]
    end
    
    subgraph Storage["Storage Layer"]
        S3[Object Storage<br/>S3/R2]
    end
    
    Web --> LV
    Mobile -.-> API
    
    LV --> Workers
    API --> Workers
    
    Workers --> PG
    Workers --> TS
    Workers --> Cache
    Workers --> S3
    
    LV --> Cache
    API --> PG
    
    classDef appLayer fill:#e1f5ff,stroke:#333,stroke-width:2px
    classDef dataLayer fill:#fff4e1,stroke:#333,stroke-width:2px
    classDef storageLayer fill:#f0f0f0,stroke:#333,stroke-width:2px
    
    class App appLayer
    class Data dataLayer
    class Storage storageLayer